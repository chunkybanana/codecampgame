<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        canvas {
            border: 1px solid #d3d3d3;
            background-color: #f1f1f1;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        img {
            transform: translate(-482px,-226px);
            width: 260px;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        #game {
            height: 702px;
            width: 1100px;
        }
    </style>
</head>
<body onload="startGame()">
    <script>var walkable = ['floor', 'tb', 'ep', 'com', 'mbt', 'epf', 'comf', 'mbtf', 'gh', 'ghf', 'sto', 'stof', 'tsh', 'tshf', 'gw', 'rw', 'yw', 'ls', 'lsf', 'w', 'wf'];
        var tasks = ['tb', 'ep', 'com', 'mbt', 'gh', 'sto', 'tsh', 'ls', 'w'];
        var pcode, pcodeattempt, kpsf;
        var blocks = [];
        var screen = 0;
        var start, message, mapnum, task, tasktype;
        var dx = new Date()

        var xpos = 17, ypos = 3, height = 32, width = 32, arr;

        function loadTiles() {

            tasks = [];
            for (var row = 0; row < height; row++) {
                for (var tile = 0; tile < width; tile++) {
                    blocks[(width * row) + tile] = 'out';
                }
            }
            if (mapnum == 0) {
                addRoom(3, 3, 4, 5, 1, 1, 1, 1);
                addRoom(14, 3, 4, 8, 1, 1, 1, 1);
                addRoom(25, 3, 5, 4, 1, 1, 1, 1);
                addRoom(3, 10, 5, 8, 1, 1, 1, 1);
                addRoom(12, 10, 5, 6, 1, 1, 1, 1);
                addRoom(11, 16, 3, 7, 1, 1, 1, 1);
                addRoom(13, 22, 5, 5, 1, 1, 1, 1);
                addRoom(23, 11, 3, 6, 1, 1, 1, 1);

                addRoom(3, 7, 3, 1, 0, 1, 0, 1);
                addRoom(19, 7, 21, 1, 0, 1, 1, 1);
                addRoom(9, 15, 13, 1, 0, 1, 1, 1);

                addRoom(22, 3, 1, 3, 1, 0, 1, 0);
                addRoom(8, 3, 1, 6, 1, 0, 1, 0);
                addRoom(11, 14, 1, 1, 1, 0, 1, 0);
                addRoom(18, 14, 1, 1, 1, 0, 1, 0);
                addRoom(10, 18, 1, 1, 1, 0, 1, 0);
                addRoom(10, 27, 1, 9, 1, 0, 1, 0);
                addRoom(20, 19, 1, 8, 1, 1, 1, 0);

                addRoom(17, 19, 3, 1, 0, 1, 0, 1);
                addRoom(17, 26, 1, 1, 0, 1, 0, 1);
                addRoom(27, 14, 5, 1, 0, 1, 0, 1);

                addDetail(8, 4, "bric");
                addDetail(13, 4, "blic");
                addDetail(4, 7, "bric");
                addDetail(18, 7, "blic");
                addDetail(20, 7, "bric");
                addDetail(22, 4, "bric");
                addDetail(24, 4, "blic");
                addDetail(4, 9, "tric");
                addDetail(8, 15, "blic");
                addDetail(10, 15, "bric");
                addDetail(18, 15, "blic");
                addDetail(20, 18, "tric");
                addDetail(20, 20, "bric");
                addDetail(26, 18, "tlic");
                addDetail(26, 14, "blic");
                addDetail(28, 14, "bric");
                addDetail(10, 19, "bric");
                addDetail(10, 26, "tric");
                addDetail(11, 15, 'dwh');
                addDetail(12, 15, 'dwh');
                addDetail(13, 15, 'dwh');
                addDetail(14, 15, 'dwh');
                addDetail(15, 15, 'dwh');
                addDetail(16, 15, 'dwh');
                addDetail(17, 15, 'dwh');
                addDetail(13, 26, 'dwh');
                addDetail(14, 26, 'dwh');
                addDetail(15, 26, 'dwh');
                addDetail(18, 25, 'dwv');
                addDetail(18, 24, 'dwv');
                addDetail(18, 23, 'dwv');
                addDetail(18, 22, 'dwv');
                addDetail(18, 21, 'dwv');
                addDetail(18, 20, 'dwv');
                addDetail(18, 19, 'dwv');
                addDetail(18, 18, 'dwv');
                addDetail(18, 17, 'dwv');
                addDetail(18, 16, 'dwv');
                addDetail(18, 12, 'dwv');
                addDetail(18, 11, 'dwv');
                addDetail(18, 10, 'dwv');
                addDetail(10, 16, 'dwv');
                addDetail(11, 12, 'dwv');
                addDetail(11, 11, 'dwv');
                addDetail(11, 10, 'dwv');
                addDetail(11, 13, 'dwet');
                addDetail(18, 13, 'dwet');
                addDetail(18, 26, 'dwet');
                addDetail(10, 17, 'dwet');
                addDetail(16, 26, 'dwel');
                addDetail(12, 26, 'twb');
                addDetail(18, 9, 'twr');
                addDetail(11, 9, 'twot');
                addDetail(16, 19, 'blic');
                addDetail(16, 21, 'tlic');
                addDetail(12, 16, 'gl');
                addDetail(13, 16, 'gm');
                addDetail(14, 16, 'gm');
                addDetail(15, 16, 'gm');
                addDetail(16, 16, 'gr');
                addDetail(12, 18, 'gl');
                addDetail(13, 18, 'gm');
                addDetail(14, 18, 'gm');
                addDetail(15, 18, 'gm');
                addDetail(16, 18, 'gr');
                addDetail(7, 4, 'mbr');
                addDetail(7, 5, 'mbr');
                addDetail(7, 6, 'mbr');
                addDetail(3, 4, 'mbl');
                addDetail(3, 5, 'mbl');
                addDetail(3, 3, 'mbl');
                addDetail(14, 4, 't');
                addDetail(14, 6, 't');
                addDetail(16, 3, 't');
                addDetail(16, 5, 't');
                addDetail(18, 4, 't');
                addDetail(18, 6, 't');
                addDetail(20, 3, 't');
                addDetail(20, 5, 't');

                for (var q = 0; q < 5; q++) {
                    var rand = Math.floor(Math.random() * 8);
                    var taskchoice;
                    switch (rand) {
                        case 0:
                            taskchoice = 'ep';
                            break;
                        case 1:
                            taskchoice = 'ls';
                            break;
                        case 2:
                            taskchoice = 'com';
                            break;
                        case 3:
                            taskchoice = 'mbt';
                            break;
                        case 4:
                            taskchoice = 'gh';
                            break;
                        case 5:
                            taskchoice = 'sto';
                            break;
                        case 6:
                            taskchoice = 'tsh';
                            break;
                        case 7:
                            taskchoice = 'w';
                            break;
                    }
                    if (tasks.includes(taskchoice)) {
                        q -= 1;
                    } else {
                        tasks.push(taskchoice);
                    }
                }
                if (tasks.includes('ep')) {
                    addDetail(14, 10, 'ep');
                } else {
                    addDetail(14, 10, 'epf');
                }
                if (tasks.includes('ls')) {
                    addDetail(14, 25, 'ls');
                } else {
                    addDetail(14, 25, 'lsf');
                }
                if (tasks.includes('com')) {
                    addDetail(27, 11, 'com');
                } else {
                    addDetail(27, 11, 'comf');
                }
                if (tasks.includes('mbt')) {
                    addDetail(5, 3, 'mbt');
                } else {
                    addDetail(5, 3, 'mbtf');
                }
                if (tasks.includes('gh')) {
                    addDetail(11, 16, 'gh');
                } else {
                    addDetail(11, 16, 'ghf');
                }
                if (tasks.includes('sto')) {
                    addDetail(7, 11, 'sto');
                } else {
                    addDetail(7, 11, 'stof');
                }
                if (tasks.includes('tsh')) {
                    addDetail(21, 6, 'tsh');
                } else {
                    addDetail(21, 6, 'tshf');
                }
                if (tasks.includes('w')) {
                    addDetail(26, 3, 'w');
                } else {
                    addDetail(26, 3, 'wf');
                }

                addDetail(15, 12, 'ept');
                addDetail(15, 11, 'yw');
                addDetail(15, 10, 'yw');
                addDetail(15, 13, 'rw');
                addDetail(15, 14, 'rw');
                addDetail(16, 12, 'gw');
                addDetail(17, 12, 'gw');

                addDetail(28, 3, 'te');
                addDetail(28, 4, 'tm');
                addDetail(28, 5, 'tm');
                addDetail(28, 6, 'tm');

                addDetail(26, 11, 'comf');
                addDetail(25, 11, 'comf');
                addDetail(24, 11, 'comf');

                addDetail(13, 25, 'lsf');
                addDetail(15, 25, 'lsf');
                addDetail(16, 25, 'lsf');


                addDetail(4, 14, 'c');
                addDetail(5, 12, 'c');
                addDetail(6, 12, 'c');
                addDetail(7, 12, 'c');
                addDetail(6, 11, 'c');
                addDetail(8, 11, 'c');
                addDetail(8, 10, 'c');
                addDetail(9, 11, 'c');
                addDetail(9, 10, 'c');
            }
            if (mapnum == 1) {
                addRoom(3, 3, 6, 4, 1, 1, 1, 1);
                addRoom(8, 6, 3, 7, 1, 1, 1, 1);
                addRoom(23, 3, 3, 4, 1, 1, 1, 1);
                addRoom(25, 10, 5, 4, 1, 1, 1, 1);
                addRoom(4, 12, 6, 4, 1, 1, 1, 1);
                addRoom(9, 17, 6, 4, 1, 1, 1, 1);
                addRoom(3, 21, 6, 3, 1, 1, 1, 1);
                addRoom(22, 21, 4, 5, 1, 1, 1, 1);

                addRoom(15, 7, 1, 8, 1, 0, 1, 0);
                addRoom(18, 8, 8, 1, 0, 1, 1, 1);
                addRoom(23, 6, 9, 1, 0, 1, 1, 1);
                addRoom(8, 15, 1, 11, 1, 0, 1, 0);
                addRoom(14, 16, 13, 1, 0, 1, 1, 1);
                addRoom(15, 26, 1, 12, 1, 1, 1, 0);
                addRoom(4, 28, 1, 11, 1, 1, 1, 1);

                addDetail(7, 5, 'twl');
                addDetail(7, 6, 'dwet');
                addDetail(7, 7, 'floor');
                addDetail(7, 8, 'dweb');
                addDetail(7, 9, 'twob');
                addDetail(15, 6, 'tric');
                addDetail(15, 8, 'bric');
                addDetail(19, 8, 'bric');
                addDetail(17, 8, 'blic');
                addDetail(22, 6, 'tlic');
                addDetail(22, 7, 'floor');
                addDetail(22, 8, 'blic');
                addDetail(24, 6, 'bric');
                addDetail(24, 10, 'dwv');
                addDetail(24, 11, 'dwv');
                addDetail(24, 12, 'dwv');
                addDetail(24, 13, 'dwet');
                addDetail(24, 14, 'floor');
                addDetail(24, 15, 'bwall');
                addDetail(18, 14, 'floor');
                addDetail(17, 14, 'tlic');
                addDetail(8, 14, 'tric');
                addDetail(8, 16, 'bric');
                addDetail(8, 18, 'twr');
                addDetail(8, 17, 'dwv');
                addDetail(9, 16, 'dwel');
                addDetail(10, 16, 'floor');
                addDetail(11, 16, 'dwer');
                addDetail(12, 16, 'dwh');
                addDetail(13, 16, 'blic');
                addDetail(13, 17, 'dwv');
                addDetail(13, 18, 'dwv');
                addDetail(13, 19, 'dwv');
                addDetail(13, 20, 'dwv');
                addDetail(13, 21, 'dwv');
                addDetail(13, 22, 'dwv');
                addDetail(13, 23, 'twr');
                addDetail(15, 16, 'bric');
                addDetail(15, 25, 'tric');
                addDetail(15, 27, 'bric');
                addDetail(21, 25, 'twb');
                addDetail(22, 25, 'dwh');
                addDetail(23, 25, 'dwh');
                addDetail(24, 25, 'dwh');
                addDetail(25, 25, 'dwel');
                addDetail(26, 25, 'floor');
                addDetail(27, 25, 'rwall');
                addDetail(13, 27, 'tlic');
                addDetail(14, 27, 'floor');
                addDetail(3, 27, 'blic');
                addDetail(4, 27, 'floor');
                addDetail(5, 27, 'dwer');
                addDetail(6, 27, 'twb');
                addDetail(24, 9, 'twl');
                addDetail(5, 3, 't');
                addDetail(5, 5, 't');
                addDetail(5, 7, 't');
                addDetail(3, 4, 't');
                addDetail(3, 6, 't');
                addDetail(3, 8, 't');
                addDetail(8, 6, 'gl');
                addDetail(9, 6, 'gm');
                addDetail(10, 6, 'gm');
                addDetail(11, 6, 'gm');
                addDetail(12, 6, 'gm');
                addDetail(13, 6, 'gr');
                addDetail(8, 8, 'gl');
                addDetail(9, 8, 'gm');
                addDetail(10, 8, 'gm');
                addDetail(11, 8, 'gm');
                addDetail(12, 8, 'gm');
                addDetail(13, 8, 'gr');
                addDetail(23, 3, 'comf');
                addDetail(25, 3, 'comf');
                addDetail(26, 3, 'comf');
                addDetail(26, 10, 'yw');
                addDetail(26, 11, 'yw');
                addDetail(26, 12, 'ept');
                addDetail(26, 13, 'rw');
                addDetail(26, 14, 'rw');
                addDetail(27, 12, 'gw');
                addDetail(28, 12, 'gw');
                addDetail(22, 21, 'c');
                addDetail(22, 22, 'c');
                addDetail(22, 23, 'c');
                addDetail(23, 22, 'c');
                addDetail(25, 22, 'c');
                addDetail(25, 21, 'c');
                addDetail(24, 24, 'c');
                addDetail(12, 19, 'te');
                addDetail(12, 20, 'tm');
                addDetail(12, 21, 'tm');
                addDetail(12, 22, 'tm');
                addDetail(4, 12, 'mbl');
                addDetail(4, 13, 'mbl');
                addDetail(4, 14, 'mbl');
                addDetail(4, 16, 'mbl');
                addDetail(4, 17, 'mbl');
                addDetail(7, 12, 'mbr');
                addDetail(7, 13, 'mbr');
                addDetail(7, 14, 'mbr');
                addDetail(7, 16, 'mbr');
                addDetail(7, 17, 'mbr');
                addDetail(3, 21, 'lsf');
                addDetail(5, 21, 'lsf');

                for (var q = 0; q < 5; q++) {
                    var rand = Math.floor(Math.random() * 8);
                    var taskchoice;
                    switch (rand) {
                        case 0:
                            taskchoice = 'ep';
                            break;
                        case 1:
                            taskchoice = 'ls';
                            break;
                        case 2:
                            taskchoice = 'com';
                            break;
                        case 3:
                            taskchoice = 'mbt';
                            break;
                        case 4:
                            taskchoice = 'gh';
                            break;
                        case 5:
                            taskchoice = 'sto';
                            break;
                        case 6:
                            taskchoice = 'tsh';
                            break;
                        case 7:
                            taskchoice = 'w';
                            break;
                    }
                    if (tasks.includes(taskchoice)) {
                        q -= 1;
                    } else {
                        tasks.push(taskchoice);
                    }
                }
                if (tasks.includes('ep')) {
                    addDetail(27, 14, 'ep');
                } else {
                    addDetail(27, 14, 'epf');
                }
                if (tasks.includes('ls')) {
                    addDetail(4, 21, 'ls');
                } else {
                    addDetail(4, 21, 'lsf');
                }
                if (tasks.includes('com')) {
                    addDetail(24, 3, 'com');
                } else {
                    addDetail(24, 3, 'comf');
                }
                if (tasks.includes('mbt')) {
                    addDetail(4, 15, 'mbt');
                } else {
                    addDetail(4, 15, 'mbtf');
                }
                if (tasks.includes('gh')) {
                    addDetail(14, 6, 'gh');
                } else {
                    addDetail(14, 6, 'ghf');
                }
                if (tasks.includes('sto')) {
                    addDetail(26, 21, 'sto');
                } else {
                    addDetail(26, 21, 'stof');
                }
                if (tasks.includes('tsh')) {
                    addDetail(6, 3, 'tsh');
                } else {
                    addDetail(6, 3, 'tshf');
                }
                if (tasks.includes('w')) {
                    addDetail(9, 17, 'w');
                } else {
                    addDetail(9, 17, 'wf');
                }








            }
            if (mapnum == 2) {
                addRoom(3, 3, 4, 15, 1, 1, 1, 1);
                addRoom(19, 15, 5, 8, 1, 1, 1, 1);
                addRoom(3, 11, 7, 7, 1, 1, 1, 1);
                addRoom(13, 19, 4, 5, 1, 1, 1, 1);
                addRoom(21, 23, 6, 6, 1, 1, 1, 1);
                addRoom(5, 19, 4, 5, 1, 1, 1, 1);
                addRoom(5, 24, 3, 7, 1, 1, 1, 1);
                addRoom(13, 24, 3, 7, 1, 1, 1, 1);

                addRoom(11, 7, 15, 1, 0, 1, 0, 1);
                addRoom(28, 13, 9, 1, 0, 1, 0, 1);
                addRoom(19, 21, 3, 1, 0, 1, 0, 1);
                addRoom(3, 18, 11, 1, 0, 1, 0, 1);

                addRoom(12, 13, 1, 17, 1, 0, 1, 0);
                addRoom(19, 21, 1, 10, 1, 0, 1, 0);
                addRoom(2, 28, 1, 18, 1, 0, 1, 0);

                addDetail(10, 7, 'blic');
                addDetail(12, 7, 'bric');
                addDetail(12, 12, 'tric');
                addDetail(12, 14, 'bric');
                addDetail(10, 10, 'twr');
                addDetail(28, 13, 'floor');
                addDetail(28, 14, 'floor');
                addDetail(29, 12, 'trc');
                addDetail(10, 11, 'dwv');
                addDetail(10, 12, 'dwv');
                addDetail(10, 13, 'dwv');
                addDetail(10, 14, 'dwv');
                addDetail(10, 15, 'dwv');
                addDetail(10, 16, 'dwv');
                addDetail(10, 17, 'dwv');
                addDetail(10, 18, 'dwv');
                addDetail(10, 19, 'dwv');
                addDetail(10, 20, 'dwv');
                addDetail(10, 21, 'dwet');
                addDetail(19, 14, 'dwh');
                addDetail(20, 14, 'dwh');
                addDetail(21, 14, 'dwh');
                addDetail(22, 14, 'dwh');
                addDetail(23, 14, 'dwh');
                addDetail(24, 14, 'dwh');
                addDetail(25, 14, 'dwh');
                addDetail(26, 14, 'dwh');
                addDetail(27, 14, 'blic');
                addDetail(27, 15, 'dwv');
                addDetail(27, 16, 'dwv');
                addDetail(27, 17, 'dwv');
                addDetail(27, 18, 'dwv');
                addDetail(27, 19, 'dwv');
                addDetail(27, 20, 'tlic');
                addDetail(10, 22, 'floor');
                addDetail(11, 22, 'floor');
                addDetail(12, 22, 'floor');
                addDetail(12, 19, 'dwv');
                addDetail(12, 20, 'dwv');
                addDetail(12, 21, 'dwet');
                addDetail(18, 14, 'twt');
                addDetail(12, 18, 'twl');
                addDetail(9, 18, 'floor');
                addDetail(18, 19, 'floor');
                addDetail(3, 18, 'floor');
                addDetail(5, 23, 'floor');
                addDetail(9, 18, 'floor');
                addDetail(12, 26, 'floor');
                addDetail(11, 27, 'floor');
                addDetail(19, 22, 'floor');
                addDetail(20, 23, 'dwv');
                addDetail(20, 24, 'dwv');
                addDetail(20, 25, 'dwv');
                addDetail(20, 26, 'dwv');
                addDetail(18, 21, 'dwv');
                addDetail(18, 22, 'dwv');
                addDetail(4, 19, 'dwv');
                addDetail(4, 20, 'dwv');
                addDetail(4, 21, 'dwv');
                addDetail(4, 22, 'dwv');
                addDetail(4, 23, 'dwv');
                addDetail(4, 24, 'dwv');
                addDetail(4, 25, 'dwv');
                addDetail(4, 26, 'dwv');
                addDetail(12, 24, 'dwv');
                addDetail(20, 28, 'floor');
                addDetail(28, 20, 'floor');
                addDetail(3, 27, 'floor');
                addDetail(2, 29, 'blc');

                addDetail(29, 22, 'brc');
                addDetail(7, 23, 'dwh');
                addDetail(8, 23, 'dwh');
                addDetail(9, 23, 'dwh');
                addDetail(10, 23, 'dwh');
                addDetail(11, 23, 'dwh');
                addDetail(13, 23, 'dwh');
                addDetail(14, 23, 'dwh');
                addDetail(15, 23, 'dwh');
                addDetail(16, 23, 'dwh');
                addDetail(17, 23, 'dwh');
                addDetail(19, 20, 'dwh');
                addDetail(20, 20, 'dwh');
                addDetail(21, 20, 'dwh');
                addDetail(22, 20, 'dwh');
                addDetail(23, 20, 'dwh');
                addDetail(24, 20, 'dwh');
                addDetail(25, 20, 'dwh');
                addDetail(26, 20, 'dwh');
                addDetail(21, 22, 'dwh');
                addDetail(22, 22, 'dwh');
                addDetail(23, 22, 'dwh');
                addDetail(24, 22, 'dwh');
                addDetail(25, 22, 'dwh');
                addDetail(26, 22, 'dwh');
                addDetail(5, 18, 'dwh');
                addDetail(6, 18, 'dwh');
                addDetail(7, 18, 'dwh');
                addDetail(5, 27, 'dwh');
                addDetail(6, 27, 'dwh');
                addDetail(7, 27, 'dwh');
                addDetail(8, 27, 'dwh');
                addDetail(9, 27, 'dwh');
                addDetail(13, 27, 'dwh');
                addDetail(14, 27, 'dwh');
                addDetail(15, 27, 'dwh');
                addDetail(16, 27, 'dwh');
                addDetail(17, 27, 'dwh');
                addDetail(18, 27, 'dwh');
                addDetail(19, 27, 'dwh');
                addDetail(2, 27, 'lwall');
                addDetail(2, 28, 'lwall');
                addDetail(4, 27, 'tric');
                addDetail(4, 18, 'bric');
                addDetail(12, 23, 'twt');
                addDetail(20, 27, 'tlic');
                addDetail(20, 22, 'bric');
                addDetail(18, 20, 'bric');
                addDetail(18, 23, 'tlic');
                addDetail(8, 18, 'dwel');
                addDetail(10, 27, 'dwel');
                addDetail(27, 22, 'twt');
                addDetail(18, 18, 'tlic');
                addDetail(18, 20, 'bric');
                addDetail(12, 25, 'dwet');
                addDetail(12, 27, 'dwer');
                addDetail(6, 23, 'dwer');
                addDetail(20, 29, 'bwall');

                addDetail(4, 4, 't');
                addDetail(8, 4, 't');
                addDetail(12, 4, 't');
                addDetail(16, 4, 't');
                addDetail(4, 6, 't');
                addDetail(8, 6, 't');
                addDetail(12, 6, 't');
                addDetail(16, 6, 't');
                addDetail(6, 3, 't');
                addDetail(10, 3, 't');
                addDetail(14, 3, 't');
                addDetail(6, 5, 't');
                addDetail(10, 5, 't');
                addDetail(14, 5, 't');

                addDetail(22, 24, 'c');
                addDetail(22, 25, 'c');
                addDetail(22, 26, 'c');
                addDetail(22, 27, 'c');
                addDetail(23, 28, 'c');
                addDetail(24, 28, 'c');
                addDetail(24, 27, 'c');
                addDetail(25, 27, 'c');
                addDetail(25, 25, 'c');
                addDetail(24, 25, 'c');
                addDetail(24, 24, 'c');
                addDetail(26, 23, 'c');

                addDetail(13, 19, 'mbl');
                addDetail(13, 20, 'mbl');
                addDetail(13, 21, 'mbl');
                addDetail(17, 20, 'mbr');
                addDetail(17, 21, 'mbr');
                addDetail(17, 22, 'mbr');

                addDetail(14, 24, 'gl');
                addDetail(15, 24, 'gm');
                addDetail(16, 24, 'gm');
                addDetail(17, 24, 'gm');
                addDetail(18, 24, 'gr');
                addDetail(14, 26, 'gl');
                addDetail(15, 26, 'gm');
                addDetail(16, 26, 'gm');
                addDetail(17, 26, 'gm');
                addDetail(18, 26, 'gr');

                addDetail(23, 17, 'ept');
                addDetail(23, 16, 'yw');
                addDetail(23, 15, 'yw');
                addDetail(23, 18, 'rw');
                addDetail(23, 19, 'rw');
                addDetail(24, 17, 'gw');
                addDetail(25, 17, 'gw');
                addDetail(26, 17, 'gw');

                addDetail(3, 12, 'te');
                addDetail(3, 13, 'tm');
                addDetail(3, 14, 'tm');
                addDetail(3, 15, 'tm');
                addDetail(3, 16, 'tm');

                addDetail(6, 19, 'lsf');
                addDetail(8, 19, 'lsf');

                addDetail(6, 24, 'comf');
                addDetail(8, 24, 'comf');
                addDetail(9, 24, 'comf');

                for (var q = 0; q < 5; q++) {
                    var rand = Math.floor(Math.random() * 8);
                    var taskchoice;
                    switch (rand) {
                        case 0:
                            taskchoice = 'ep';
                            break;
                        case 1:
                            taskchoice = 'ls';
                            break;
                        case 2:
                            taskchoice = 'com';
                            break;
                        case 3:
                            taskchoice = 'mbt';
                            break;
                        case 4:
                            taskchoice = 'gh';
                            break;
                        case 5:
                            taskchoice = 'sto';
                            break;
                        case 6:
                            taskchoice = 'tsh';
                            break;
                        case 7:
                            taskchoice = 'w';
                            break;
                    }
                    if (tasks.includes(taskchoice)) {
                        q -= 1;
                    } else {
                        tasks.push(taskchoice);
                    }
                }
                if (tasks.includes('ep')) {
                    addDetail(20, 17, 'ep');
                } else {
                    addDetail(20, 17, 'epf');
                }
                if (tasks.includes('ls')) {
                    addDetail(7, 19, 'ls');
                } else {
                    addDetail(7, 19, 'lsf');
                }
                if (tasks.includes('com')) {
                    addDetail(7, 24, 'com');
                } else {
                    addDetail(7, 24, 'comf');
                }
                if (tasks.includes('mbt')) {
                    addDetail(15, 19, 'mbt');
                } else {
                    addDetail(15, 19, 'mbtf');
                }
                if (tasks.includes('gh')) {
                    addDetail(13, 24, 'gh');
                } else {
                    addDetail(13, 24, 'ghf');
                }
                if (tasks.includes('sto')) {
                    addDetail(25, 28, 'sto');
                } else {
                    addDetail(25, 28, 'stof');
                }
                if (tasks.includes('tsh')) {
                    addDetail(17, 3, 'tsh');
                } else {
                    addDetail(17, 3, 'tshf');
                }
                if (tasks.includes('w')) {
                    addDetail(5, 11, 'w');
                } else {
                    addDetail(5, 11, 'wf');
                }
            }
        }


        function openFullscreen() {
            if (document.getElementById('game').requestFullscreen) {
                document.getElementById('game').requestFullscreen();
            } else if (document.getElementById('game').mozRequestFullScreen) { /* Firefox */
                document.getElementById('game').mozRequestFullScreen();
            } else if (document.getElementById('game').webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                document.getElementById('game').webkitRequestFullscreen();
            } else if (document.getElementById('game').msRequestFullscreen) { /* IE/Edge */
                document.getElementById('game').msRequestFullscreen();
            }
        }
        function addDetail(xx, yy, src) {
            blocks[(yy * width) + xx] = src;
        }
        function addRoom(xx, yy, ww, hh, wt, wr, wb, wl) {
            for (var l = 0; l < ww; l++) {
                for (var m = 0; m < hh; m++) {
                    blocks[(width * (yy + l)) + xx + m] = 'floor';
                }
            }
            if (wl) {
                for (var k = 0; k < ww; k++) {
                    blocks[(width * (yy + k)) + xx - 1] = 'lwall';
                }
            }
            if (wr) {
                for (var k = 0; k < ww; k++) {
                    blocks[(width * (yy + k)) + xx + hh] = 'rwall';
                }
            }
            if (wt) {
                for (var k = 0; k < hh; k++) {
                    blocks[(width * (yy - 1)) + xx + k] = 'twall';
                }
            }
            if (wb) {
                for (var k = 0; k < hh; k++) {
                    blocks[(width * (yy + ww)) + xx + k] = 'bwall';
                }
            }
            if (wt && wl) {
                blocks[(width * (yy - 1)) + xx - 1] = 'tlc';
            }
            if (wb && wl) {
                blocks[(width * (yy + ww)) + xx - 1] = 'blc';
            }
            if (wt && wr) {
                blocks[(width * (yy - 1)) + xx + hh] = 'trc';
            }
            if (wb && wr) {
                blocks[(width * (yy + ww)) + xx + hh] = 'brc';
            }
        }
        var s;
        function startGame() {
            myGameArea.start();
            s = new sound('2019-04-26_-_Tranquility_-_www.fesliyanstudios.com.mp3')
            s.play();
        }
        function sound(src) {
            this.sound = document.createElement("audio");
            this.sound.src = src;
            this.sound.setAttribute("preload", "auto");
            this.sound.setAttribute("controls", "none");
            this.sound.style.display = "none";
            document.body.appendChild(this.sound);
            this.play = function () {
                this.sound.play();
            }
            this.stop = function () {
                this.sound.pause();
            }
        }
        var myGameArea = {
            start: function () {
                document.getElementById("canvas").width = 700;
                document.getElementById("canvas").height = 700;
                this.context = document.getElementById("canvas").getContext("2d");
                this.interval = setInterval(updateGameArea, 50);
                window.addEventListener('keydown', function (e) {
                    myGameArea.keys = (myGameArea.keys || []);
                    myGameArea.keys[e.keyCode] = (e.type == "keydown");
                })
                window.addEventListener('keyup', function (e) {
                    myGameArea.keys[e.keyCode] = (e.type == "keydown");
                })
                window.addEventListener('mousedown', function (e) {
                    myGameArea.x = e.pageX;
                    myGameArea.y = e.pageY;
                    myGameArea.click = true;
                })
                window.addEventListener('mousemove', function (e) {
                    myGameArea.x = e.pageX;
                    myGameArea.y = e.pageY;
                })
                window.addEventListener('mouseup', function (e) {
                    myGameArea.x = false;
                    myGameArea.y = false;
                    myGameArea.click = false;
                })
                window.addEventListener('touchstart', function (e) {
                    myGameArea.x = e.pageX;
                    myGameArea.y = e.pageY;
                })
                window.addEventListener('touchmove', function (e) {
                    myGameArea.x = e.touches[0].screenX;
                    myGameArea.y = e.touches[0].screenY;
                })
                window.addEventListener('touchend', function (e) {
                    myGameArea.x = false;
                    myGameArea.y = false;
                })
            },
            clear: function () {
                this.context.clearRect(0, 0, document.getElementById("canvas").width, document.getElementById("canvas").height);
            }
        }
        function renderBlocks() {
            var ctx = myGameArea.context;
            for (var l = 0; l < blocks.length; l++) {

                var rowDraw = Math.floor(l / width);
                var tileDraw = l % width;
                if ((tileDraw - xpos + 3) * 100 <= 800 && (tileDraw - xpos + 3) * 100 >= -100 && (rowDraw - ypos + 3) * 100 <= 800 && (rowDraw - ypos + 3) * 100 >= -100) {
                    var imgs = new Image();
                    switch (blocks[l]) {
                        case 'out':
                            imgs.src = 'Space Texture (Outside Filler).PNG';
                            break;
                        case 'floor':
                            imgs.src = 'Floor Texture.PNG';
                            break;
                        case 'bwall':
                            imgs.src = 'Wall Texture (Bottom).PNG';
                            break;
                        case 'rwall':
                            imgs.src = 'Wall Texture (Right).PNG';
                            break;
                        case 'lwall':
                            imgs.src = 'Wall Texture (Left).PNG';
                            break;
                        case 'twall':
                            imgs.src = 'Wall Texture (Top).PNG';
                            break;
                        case 'tlc':
                            imgs.src = 'Corner Wall Texture (Top Left).PNG';
                            break;
                        case 'trc':
                            imgs.src = 'Corner Wall Texture (Top Right).PNG';
                            break;
                        case 'blc':
                            imgs.src = 'Corner Wall Texture (Bottom Left).PNG';
                            break;
                        case 'brc':
                            imgs.src = 'Corner Wall Texture (Bottom Right).PNG';
                            break;
                        case 'bric':
                            imgs.src = 'Inside Corner Wall (Bottom Right).PNG';
                            break;
                        case 'blic':
                            imgs.src = 'Inside Corner Wall (Bottom Left).PNG';
                            break;
                        case 'tric':
                            imgs.src = 'Inside Corner Wall (Top Right).PNG';
                            break;
                        case 'tlic':
                            imgs.src = 'Inside Corner Wall (Top Left).PNG';
                            break;
                        case 'dwh':
                            imgs.src = 'Double Sided Wall (Horisontal).PNG';
                            break;
                        case 'dwv':
                            imgs.src = 'Double Sided Wall (Vertical).PNG';
                            break;
                        case 'dwet':
                            imgs.src = 'Double Wall End (Top).PNG';
                            break;
                        case 'dwel':
                            imgs.src = 'Double Wall End (Left).PNG';
                            break;
                        case 'dwer':
                            imgs.src = 'Double Wall End (Right).PNG';
                            break;
                        case 'dweb':
                            imgs.src = 'Double Wall End (Bottom).PNG';
                            break;
                        case 'twb':
                            imgs.src = 'Triple Wall Bottom.png';
                            break;
                        case 'twt':
                            imgs.src = 'Triple Wall Top.png';
                            break;
                        case 'twr':
                            imgs.src = 'Triple Wall Right.png';
                            break;
                        case 'twl':
                            imgs.src = 'Triple Wall Left.png';
                            break;
                        case 'twot':
                            imgs.src = 'Triple Wall Outside Top.png';
                            break;
                        case 'twob':
                            imgs.src = 'Triple Wall Outside Bottom.png';
                            break;
                        case 'mbl':
                            imgs.src = 'Medbay Bed Texture (Left).PNG';
                            break;
                        case 'mbr':
                            imgs.src = 'Medbay Bed Texture (Right).PNG';
                            break;
                        case 'gl':
                            imgs.src = 'Right Greenhouse Texture.PNG';
                            break;
                        case 'gm':
                            imgs.src = 'Center Greenhouse Texture.PNG';
                            break;
                        case 'gr':
                            imgs.src = 'Left Greenhouse Texture.PNG';
                            break;
                        case 't':
                            imgs.src = 'Cafeteria Table Texture.PNG';
                            break;
                        case 'dwhw':
                            imgs.src = 'Double Sided Wall Wiring (Horizontal).png';
                            break;
                        case 'wtw':
                            imgs.src = 'Wall Texture Wiring (Top).png';
                            break;
                        case 'c':
                            imgs.src = 'Storage Crate Texture.PNG';
                            break;
                        case 'tb':
                            imgs.src = 'Task Button.png';
                            break;
                        case 'ep':
                            imgs.src = 'Electrical Panel Floor Texture.PNG';
                            break;
                        case 'com':
                            imgs.src = 'Comms Task Texture.PNG';
                            break;
                        case 'epf':
                            imgs.src = 'Electrical Panel Floor Texture (Completed).PNG';
                            break;
                        case 'comf':
                            imgs.src = 'Comms Task Complete.png';
                            break;
                        case 'mbt':
                            imgs.src = 'Med Task.png';
                            break;
                        case 'mbtf':
                            imgs.src = 'Med Task Complete.png';
                            break;
                        case 'gh':
                            imgs.src = 'Greenhouse Task.PNG';
                            break;
                        case 'ghf':
                            imgs.src = 'Greenhouse Task (completed).PNG';
                            break;
                        case 'sto':
                            imgs.src = 'Storage Task (New).PNG';
                            break;
                        case 'stof':
                            imgs.src = 'Storage Crate (New).PNG';
                            break;
                        case 'tsh':
                            imgs.src = 'Trashcan.png';
                            break;
                        case 'tshf':
                            imgs.src = 'Trashcan Complete.png';
                            break;
                        case 'gw':
                            imgs.src = 'Green Wire.png';
                            break;
                        case 'rw':
                            imgs.src = 'Red Wire.png';
                            break;
                        case 'yw':
                            imgs.src = 'Yellow Wire.png';
                            break;
                        case 'ept':
                            imgs.src = 'Electrical Panel.png';
                            break;
                        case 'ls':
                            imgs.src = 'O2 Task.PNG';
                            break;
                        case 'lsf':
                            imgs.src = 'O2 Task (Completed).PNG';
                            break;
                        case 'w':
                            imgs.src = 'Weapons Task.png';
                            break;
                        case 'wf':
                            imgs.src = 'Weapons Task Complete.png';
                            break;
                        case 'te':
                            imgs.src = 'Torpedo Front.png';
                            break;
                        case 'tm':
                            imgs.src = 'Torpedo Middle.png';
                            break;
                    }
                    ctx.drawImage(imgs, (tileDraw - xpos + 3) * 100, (rowDraw - ypos + 3) * 100, 100, 100);
                }
            }
        }

        function left() {
            if (walkable.includes(blocks[(Math.floor(ypos) * width) + Math.ceil(xpos + 0.125)]) && walkable.includes(blocks[(Math.ceil(ypos) * width) + Math.ceil(xpos + 0.125)])) {

                xpos += 0.125;
                if (xpos >= width - 1) {
                    xpos = width - 1;
                }
            }
        }
        function right() {
            if (walkable.includes(blocks[(Math.floor(ypos) * width) + Math.floor(xpos - 0.125)]) && walkable.includes(blocks[(Math.ceil(ypos) * width) + Math.floor(xpos - 0.125)])) {

                xpos -= 0.125;
                if (xpos <= 0) {
                    xpos = 0;
                }
            }
        }
        function up() {
            if (walkable.includes(blocks[(Math.floor(ypos - 0.125) * width) + Math.floor(xpos)]) && walkable.includes(blocks[(Math.floor(ypos - 0.125) * width) + Math.ceil(xpos)])) {

                ypos -= 0.125;
                if (ypos <= 0) {
                    ypos = 0;
                }
            }
        }
        function down() {
            if (walkable.includes(blocks[(Math.ceil(ypos + 0.125) * width) + Math.floor(xpos)]) && walkable.includes(blocks[(Math.ceil(ypos + 0.125) * width) + Math.ceil(xpos)])) {

                ypos += 0.125;
                if (ypos >= height) {
                    ypos = height;
                }
            }
        }

        function updateGameArea() {
            myGameArea.clear();
            if (screen == 0) {
                var bImage = new Image();
                bImage.src = 'Title Screen.png'
                myGameArea.context.drawImage(bImage, 0, 0, 700, 700);
                if (message) {
                    myGameArea.context.fillStyle = 'black'
                    myGameArea.context.font = '25px Arial';
                    myGameArea.context.fillText(message, 0, 600)
                }
                document.getElementById('player').style.opacity = 0;
                if (myGameArea.x && myGameArea.y && myGameArea.x > 286 && myGameArea.y > 286 && myGameArea.x < 413 && myGameArea.y < 413 && myGameArea.click) {
                    mapnum = Math.floor(Math.random() * 3);
                    loadTiles();
                    screen = 1;
                    if (mapnum == 0) {
                        xpos = 17;
                        ypos = 3;
                    }
                    if (mapnum == 1) {
                        xpos = 4;
                        ypos = 4;
                    }
                    if (mapnum == 2) {
                        xpos = 3;
                        ypos = 3;
                    }
                    dx = new Date()
                    start = dx.getTime();
                }
                if (myGameArea.x && myGameArea.y && myGameArea.x > 204.5 && myGameArea.y > 440.5 && myGameArea.x < 495 && myGameArea.y < 514.5 && myGameArea.click) {
                    screen = 2;
                    console.log(screen);
                }
            } else if (screen == 1) {

                if (myGameArea.keys && (myGameArea.keys[109] || myGameArea.keys[77]) || (myGameArea.click && myGameArea.x < 600 && myGameArea.x > 500 && myGameArea.y > 600 && myGameArea.y < 700)) {
                    var map = new Image();
                    if (mapnum == 0) {
                        map.src = "map.png";
                    }

                    if (mapnum == 1) {
                        map.src = "map-1.png";
                    }
                    if (mapnum == 2) {
                        map.src = "map-2.png";
                    }
                    myGameArea.context.drawImage(map, 0, 0, 700, 700)
                    document.getElementById('player').style.opacity = 0;
                    myGameArea.context.fillStyle = 'yellow';
                    myGameArea.context.fillRect(xpos * 700 / 32, ypos * 700 / 32, 700 / 32, 700 / 32);
                    myGameArea.context.fillStyle = 'red';

                    for (var cnf = 0; cnf < blocks.length; cnf++) {
                        for (var l = 0; l < tasks.length; l++) {
                            if (blocks[cnf] == tasks[l]) {
                                myGameArea.context.fillRect(cnf % width * 700 / 32, Math.floor(cnf / width) * 700 / 32, 700 / 32, 700 / 32);

                            }
                        }
                    }
                } else {
                    document.getElementById('player').style.opacity = 'inherit';
                    if ((myGameArea.keys && (myGameArea.keys[37] || myGameArea.keys[97] || myGameArea.keys[65])) || (myGameArea.x && myGameArea.x < 200 && myGameArea.click)) {
                        right();
                    }
                    if ((myGameArea.keys && (myGameArea.keys[39] || myGameArea.keys[100] || myGameArea.keys[68])) || (myGameArea.x && myGameArea.x > 500 && myGameArea.click)) {
                        left();
                    }
                    if ((myGameArea.keys && (myGameArea.keys[38] || myGameArea.keys[119] || myGameArea.keys[87])) || (myGameArea.y && myGameArea.y < 200 && myGameArea.click)) {
                        up();
                    }
                    if ((myGameArea.keys && (myGameArea.keys[40] || myGameArea.keys[115] || myGameArea.keys[83])) || (myGameArea.y && myGameArea.y > 500 && myGameArea.click)) {
                        down();
                    }

                    if ((myGameArea.keys && (myGameArea.keys[37] || myGameArea.keys[97] || myGameArea.keys[65])) || (myGameArea.x && myGameArea.x < 200 && myGameArea.click)) {
                        if (document.getElementById('player').src != 'https://doomsdaygame.surge.sh/New%20Piskel%20(4).gif') {
                            document.getElementById('player').src = 'New Piskel (4).gif';
                        }
                    } else if ((myGameArea.keys && (myGameArea.keys[39] || myGameArea.keys[100] || myGameArea.keys[68])) || (myGameArea.x && myGameArea.x > 500 && myGameArea.click)) {
                        if (document.getElementById('player').src != 'https://doomsdaygame.surge.sh/New%20Piskel%20(5).gif') {
                            document.getElementById('player').src = 'New Piskel (5).gif';

                        }
                    } else if ((myGameArea.keys && (myGameArea.keys[38] || myGameArea.keys[119] || myGameArea.keys[87])) || (myGameArea.y && myGameArea.y < 200 && myGameArea.click)) {
                        if (document.getElementById('player').src != 'https://doomsdaygame.surge.sh/New%20Piskel%20(7).gif') {
                            document.getElementById('player').src = 'New Piskel (7).gif';

                        }
                    } else if ((myGameArea.keys && (myGameArea.keys[40] || myGameArea.keys[115] || myGameArea.keys[83])) || (myGameArea.y && myGameArea.y > 500 && myGameArea.click)) {
                        if (document.getElementById('player').src != 'https://doomsdaygame.surge.sh/New%20Piskel%20(6).gif') {
                            document.getElementById('player').src = 'New Piskel (6).gif';

                        }
                    } else {
                        document.getElementById('player').src = 'New Piskel (8).gif';
                    }

                    renderBlocks();
                    var mapimg = new Image();
                    mapimg.src = 'mapbutton.png';
                    myGameArea.context.drawImage(mapimg, 500, 600, 100, 100);
                    if ((tasks.includes(blocks[(Math.floor(ypos) * width) + Math.floor(xpos)]) || tasks.includes(blocks[(Math.ceil(ypos) * width) + Math.floor(xpos)]) || tasks.includes(blocks[(Math.floor(ypos) * width) + Math.ceil(xpos)]) || tasks.includes(blocks[(Math.ceil(ypos) * width) + Math.ceil(xpos)]))) {
                        mapimg = new Image();
                        mapimg.src = 'taskbutton.png';
                        myGameArea.context.drawImage(mapimg, 600, 600, 100, 100);
                        if ((myGameArea.keys && myGameArea.keys[32]) || (myGameArea.click && myGameArea.x > 600 && myGameArea.x < 700 && myGameArea.y > 600 && myGameArea.y < 700)) {
                            screen = 3;
                            tasktype = Math.floor(Math.random() * 2);
                            if (tasktype == 0) {
                                arr = [];
                                for (var m = 0; m < 9; m++) {
                                    arr.push(Math.floor(Math.random() * 2));
                                }
                            } else if (tasktype == 1) {
                                pcode = Math.floor(Math.random() * 9000) + 1000;
                                pcodeattempt = 0;
                                kpsf = 0;
                            }
                        }
                    }
                    if (task == 'complete') {
                        if (tasks.includes(blocks[(Math.floor(ypos) * width) + Math.floor(xpos)])) {
                            blocks[(Math.floor(ypos) * width) + Math.floor(xpos)] = blocks[(Math.floor(ypos) * width) + Math.floor(xpos)] + 'f';
                        }
                        if (tasks.includes(blocks[(Math.ceil(ypos) * width) + Math.floor(xpos)])) {
                            blocks[(Math.ceil(ypos) * width) + Math.floor(xpos)] = blocks[(Math.ceil(ypos) * width) + Math.floor(xpos)] + 'f';
                        }
                        if (tasks.includes(blocks[(Math.floor(ypos) * width) + Math.ceil(xpos)])) {
                            blocks[(Math.floor(ypos) * width) + Math.ceil(xpos)] = blocks[(Math.floor(ypos) * width) + Math.ceil(xpos)] + 'f';
                        }
                        if (tasks.includes(blocks[(Math.ceil(ypos) * width) + Math.ceil(xpos)])) {
                            blocks[(Math.ceil(ypos) * width) + Math.ceil(xpos)] = blocks[(Math.ceil(ypos) * width) + Math.ceil(xpos)] + 'f';
                        }
                        task = 'incomplete';
                    }
                    var check = 0;
                    for (var cnf = 0; cnf < blocks.length; cnf++) {
                        for (var l = 0; l < tasks.length; l++) {
                            if (blocks[cnf] == tasks[l]) {
                                check = 1;
                            }
                        }
                    }
                    myGameArea.context.font = '30px Arial'
                    myGameArea.context.fillStyle = 'white'
                    var d = new Date();
                    var s = (Math.floor((d.getTime() - start) / 1000) % 60)
                    var m = Math.floor(Math.floor((d.getTime() - start) / 1000) / 60)
                    if (s < 10) {
                        myGameArea.context.fillText(m + ':0' + s, 625, 25)
                    }
                    if (s >= 10) {
                        myGameArea.context.fillText(m + ':' + s, 625, 25)
                    }
                    if (check == 0) {
                        if (s < 10) {
                            message = 'Your time: ' + m + ':0' + s + '.Try again?'
                        }
                        if (s >= 10) {
                            message = 'Your time: ' + m + ':' + s + '.Try again?'
                        }
                        screen = 0;
                    }
                }
            } else if (screen == 2) {
                var bImage = new Image();
                bImage.src = 'How to play.png'
                myGameArea.context.drawImage(bImage, 0, 0, 700, 700);
                document.getElementById('player').style.opacity = 0;
                if (myGameArea.x && myGameArea.y && myGameArea.x > 505 && myGameArea.y > 619 && myGameArea.x < 631.5 && myGameArea.y < 674 && myGameArea.click) {
                    screen = 0;
                }
            } else if (screen == 3) {
                document.getElementById('player').style.opacity = 0;
                if (tasktype == 0) {
                    for (var lq = 0; lq < arr.length; lq++) {
                        if (arr[lq] == 1) {
                            myGameArea.context.fillStyle = 'red';
                        } else {
                            myGameArea.context.fillStyle = 'grey';
                        }
                        myGameArea.context.fillRect(100 + (150 * (lq % 3)), 100 + (150 * (Math.floor(lq / 3))), 100, 100);
                        if (myGameArea.x && myGameArea.y) {
                            if (myGameArea.x > 100 && myGameArea.y > 100 && myGameArea.x < 200 && myGameArea.y < 200 && myGameArea.click) {
                                if (arr[0] == 0) {
                                    arr[0] = 1;
                                } else {
                                    arr[0] = 0;
                                }
                            }
                            if (myGameArea.x > 250 && myGameArea.y > 100 && myGameArea.x < 350 && myGameArea.y < 200 && myGameArea.click) {
                                if (arr[1] == 0) {
                                    arr[1] = 1;
                                } else {
                                    arr[1] = 0;
                                }
                            }
                            if (myGameArea.x > 400 && myGameArea.y > 100 && myGameArea.x < 500 && myGameArea.y < 200 && myGameArea.click) {
                                if (arr[2] == 0) {
                                    arr[2] = 1;
                                } else {
                                    arr[2] = 0;
                                }
                            }
                            if (myGameArea.x > 100 && myGameArea.y > 250 && myGameArea.x < 200 && myGameArea.y < 350 && myGameArea.click) {
                                if (arr[3] == 0) {
                                    arr[3] = 1;
                                } else {
                                    arr[3] = 0;
                                }
                            }
                            if (myGameArea.x > 250 && myGameArea.y > 250 && myGameArea.x < 350 && myGameArea.y < 350 && myGameArea.click) {
                                if (arr[4] == 0) {
                                    arr[4] = 1;
                                } else {
                                    arr[4] = 0;
                                }
                            }
                            if (myGameArea.x > 400 && myGameArea.y > 250 && myGameArea.x < 500 && myGameArea.y < 350 && myGameArea.click) {
                                if (arr[5] == 0) {
                                    arr[5] = 1;
                                } else {
                                    arr[5] = 0;
                                }
                            }
                            if (myGameArea.x > 100 && myGameArea.y > 400 && myGameArea.x < 200 && myGameArea.y < 500 && myGameArea.click) {
                                if (arr[6] == 0) {
                                    arr[6] = 1;
                                } else {
                                    arr[6] = 0;
                                }
                            }
                            if (myGameArea.x > 250 && myGameArea.y > 400 && myGameArea.x < 350 && myGameArea.y < 500 && myGameArea.click) {
                                if (arr[7] == 0) {
                                    arr[7] = 1;
                                } else {
                                    arr[7] = 0;
                                }
                            }
                            if (myGameArea.x > 400 && myGameArea.y > 400 && myGameArea.x < 500 && myGameArea.y < 500 && myGameArea.click) {
                                if (arr[8] == 0) {
                                    arr[8] = 1;
                                } else {
                                    arr[8] = 0;
                                }
                            }
                            myGameArea.x = false;
                            myGameArea.y = false;
                            myGameArea.click = false;
                        }
                        if (!arr.includes(0)) {
                            task = 'complete';
                            screen = 1;
                        }
                    }
                } else if (tasktype == 1) {
                    for (var m = 0; m < 10; m++) {
                        myGameArea.context.fillStyle = 'grey';

                        myGameArea.context.font = '100px Arial';
                        myGameArea.context.fillRect(100 + (150 * (m % 3)), 100 + (150 * (Math.floor(m / 3))), 100, 100);
                        myGameArea.context.fillStyle = 'black';
                        myGameArea.context.fillText((m + 1) % 10, 130 + (150 * (m % 3)), 190 + (150 * (Math.floor(m / 3))));

                        if (myGameArea.x && myGameArea.y && myGameArea.click) {
                            if (myGameArea.x > 100 && myGameArea.y > 100 && myGameArea.x < 200 && myGameArea.y < 200) {
                                pcodeattempt *= 10;
                                pcodeattempt += 1;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 250 && myGameArea.y > 100 && myGameArea.x < 350 && myGameArea.y < 200) {
                                pcodeattempt *= 10;
                                pcodeattempt += 2;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 400 && myGameArea.y > 100 && myGameArea.x < 500 && myGameArea.y < 200) {
                                pcodeattempt *= 10;
                                pcodeattempt += 3;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 100 && myGameArea.y > 250 && myGameArea.x < 200 && myGameArea.y < 350) {
                                pcodeattempt *= 10;
                                pcodeattempt += 4;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 250 && myGameArea.y > 250 && myGameArea.x < 350 && myGameArea.y < 350) {
                                pcodeattempt *= 10;
                                pcodeattempt += 5;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 400 && myGameArea.y > 250 && myGameArea.x < 500 && myGameArea.y < 350) {
                                pcodeattempt *= 10;
                                pcodeattempt += 6;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 100 && myGameArea.y > 400 && myGameArea.x < 200 && myGameArea.y < 500) {
                                pcodeattempt *= 10;
                                pcodeattempt += 7;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 250 && myGameArea.y > 400 && myGameArea.x < 350 && myGameArea.y < 500) {
                                pcodeattempt *= 10;
                                pcodeattempt += 8;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 400 && myGameArea.y > 400 && myGameArea.x < 500 && myGameArea.y < 500) {
                                pcodeattempt *= 10;
                                pcodeattempt += 9;
                                kpsf += 1;
                            }
                            if (myGameArea.x > 100 && myGameArea.y > 550 && myGameArea.x < 200 && myGameArea.y < 650) {
                                pcodeattempt *= 10;
                                pcodeattempt += 0;
                                kpsf += 1;
                            }

                            myGameArea.x = false;
                            myGameArea.y = false;
                            myGameArea.click = false;
                        }
                    }
                    myGameArea.context.fillStyle = 'black';
                    myGameArea.context.font = '50px Arial'
                    myGameArea.context.fillText("The passcode is " + pcode, 210, 650);
                    myGameArea.context.font = '100px Arial';

                    myGameArea.context.fillText(pcodeattempt, 200, 90);
                    if (kpsf == 4) {
                        kpsf = 0;
                        if (pcodeattempt == pcode) {
                            task = 'complete';
                            screen = 1;
                        } else {
                            pcodeattempt = 0;
                        }
                    }
                }
            }
        }</script>
    <div id="game"><canvas id="canvas"></canvas><img src="New Piskel (4).gif" id="player" /></div><a href="bored2.html">Phone version</a>
</body>
</html>
